graph TD
    subgraph "Ð˜Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚"
        User(ðŸ‘¤ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ)
        Telegram[ðŸŒ Telegram API]
    end

    subgraph "Ð’Ð°ÑˆÐ° Ð˜Ð½Ñ„Ñ€Ð°ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° (Docker)"
        Nginx(ðŸŒ Nginx)

        subgraph "Service: bot_gateway"
            FastAPI(ðŸš€ FastAPI)
            Aiogram(ðŸ¤– Aiogram)
            gRPC_Client(ðŸ”Œ gRPC Client)
        end

        Consul(ðŸ“ Consul)

        subgraph "Service: auth_service (Ð¿Ñ€ÐµÐ´Ð¿Ð¾Ð»Ð°Ð³Ð°ÐµÐ¼Ñ‹Ð¹)"
            AuthService(ðŸ”’ gRPC Auth Service)
        end

    end

    User -- "ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ /start" --> Telegram
    Telegram -- "POST Webhook" --> Nginx
    Nginx -- "proxy_pass http://bot_gateway:8000" --> FastAPI

    FastAPI -- "ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾Ñ" --> Aiogram
    Aiogram -- "Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ñ…ÐµÐ½Ð´Ð»ÐµÑ€" --> gRPC_Client

    gRPC_Client -- "1. Ð—Ð°Ð¿Ñ€Ð¾Ñ Ð°Ð´Ñ€ÐµÑÐ° auth_service" --> Consul
    Consul -- "2. Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð°Ð´Ñ€ÐµÑ" --> gRPC_Client
    gRPC_Client -- "3. gRPC Ð²Ñ‹Ð·Ð¾Ð² GetUser(id)" --> AuthService
    AuthService -- "4. Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ" --> gRPC_Client
    
    gRPC_Client -- "Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ñ…ÐµÐ½Ð´Ð»ÐµÑ€Ñƒ" --> Aiogram
    Aiogram -- "Ð¤Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÑ‚ Ð¾Ñ‚Ð²ÐµÑ‚" --> FastAPI
    FastAPI -- "ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¾Ñ‚Ð²ÐµÑ‚ Ð² Telegram" --> Telegram
    Telegram -- "Ð”Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ" --> User

    %% Dependencies
    Nginx --> bot_gateway
    bot_gateway --> Consul
    auth_service -.-> Consul